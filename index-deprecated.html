<!DOCTYPE html>
    <head>
        <meta charset="UTF-8">
        <title>Greenmap</title>
    </head>
    <body>
        <svg width="960" height="500"></svg>
        <script src="https://d3js.org/d3.v4.min.js"></script>
        <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
        <script src="https://d3js.org/topojson.v2.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/randomcolor/0.4.4/randomColor.js"></script>
        <script>

        var svg = d3.select("svg"),
            width = +svg.attr("width"),
            height = +svg.attr("height"),
            path;

        // svg.attr("viewBox", "47.98441 11.2706 0.34035 0.54414");
        // svg.attr("viewBox", "49 11.27 1 1");

        // var color = d3.scaleThreshold()
        //     .domain([1, 10, 50, 200, 500, 1000, 2000, 4000])
        //     .range(d3.schemeOrRd[9]);

        // var x = d3.scaleSqrt()
        //     .domain([0, 4500])
        //     .rangeRound([440, 950]);

        // var g = svg.append("g")
        //     .attr("class", "key")
        //     .attr("transform", "translate(0,40)");

        // g.selectAll("rect")
        //   .data(color.range().map(function(d) {
        //       d = color.invertExtent(d);
        //       if (d[0] == null) d[0] = x.domain()[0];
        //       if (d[1] == null) d[1] = x.domain()[1];
        //       return d;
        //     }))
        //   .enter().append("rect")
        //     .attr("height", 8)
        //     .attr("x", function(d) { return x(d[0]); })
        //     .attr("width", function(d) { return x(d[1]) - x(d[0]); })
        //     .attr("fill", function(d) { return color(d[0]); });

        // g.append("text")
        //     .attr("class", "caption")
        //     .attr("x", x.range()[0])
        //     .attr("y", -6)
        //     .attr("fill", "#000")
        //     .attr("text-anchor", "start")
        //     .attr("font-weight", "bold")
        //     .text("Population per square mile");

        // g.call(d3.axisBottom(x)
        //     .tickSize(13)
        //     .tickValues(color.domain()))
        //   .select(".domain")
        //     .remove();

        d3.json("stadtbezirke.json", function(error, ca) {
          if (error) throw error;

          // console.log(ca.features);
          // console.log(topojson.feature(ca, ca.features));

        //   var minx=999999, miny=999999, maxx=0, maxy=0;

        // console.log("minX: ", minx, "minY: ", miny, "maxX: ", maxx, "maxY", maxy);
          // console.log(ca);
          //

          ca.features.forEach
          console.log("GEO BOUNDS", ca);

        var projection = d3.geoMercator()
            .center([11.54183, 48.155])
            .scale(150)
            // .translate([svg.attr("width")/2, svg.attr("height"/2)]);

        // 48.155, 11.54183

        path = d3.geoPath().projection(projection);

          svg.append("svg")
            // .attr("viewBox", "11.2706 47.98441 0.54414 0.34035")
            .attr("viewBox", "479.5 249.5 1 1")
            .selectAll("path")
            .data(ca.features)
            .enter().append("path")
              .attr("fill", function(d) {
                return randomColor();
                // return color(d.properties.density);
              })
              .attr("d", path);

          // svg
          //   .selectAll("path")
          //   .data(ca.features)
          //   .enter().append("polyline")
          //     .attr("fill", function(d) {
          //       return "#000000";
          //       // return color(d.properties.density);
          //     })
          //     .attr("points", function (d) {
          //       var curPath = d.geometry.coordinates[0];
          //       var pathStr = "";
          //       curPath.forEach(function (coordinate) {
          //           minx = Math.min(minx, coordinate[0]);
          //           console.log(minx);
          //           return;
          //           miny = Math.min(miny, coordinate[1]);
          //           maxx = Math.max(maxx, coordinate[0]);
          //           maxy = Math.max(maxy, coordinate[1]);
          //           pathStr += "" + 1*coordinate[0] + " " + 1*coordinate[1] + " ";
          //       });
          //       // console.log(curPath.length, pathStr);
          //       return pathStr;
          //     });

          //   console.log("minX: ", minx, "minY: ", miny, "maxX: ", maxx, "maxY", maxy);

          // svg.append("path")
          //     .datum(topojson.feature(ca, ca.objects.counties))
          //     .attr("fill", "none")
          //     .attr("stroke", "#000")
          //     .attr("stroke-opacity", 0.3)
          //     .attr("d", path);
        });

        </script>
    </body>
</html>


